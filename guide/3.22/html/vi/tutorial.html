<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; Xitrum Scala Web Framework Guide 3.22 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.22',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Xitrum Scala Web Framework Guide 3.22 documentation" href="index.html" />
    <link rel="next" title="Action and view" href="action_view.html" />
    <link rel="prev" title="Giới thiệu" href="intro.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="action_view.html" title="Action and view"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Giới thiệu"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Xitrum Scala Web Framework Guide 3.22 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>Phần này trình bày một ngắn gọn cách tạo và chạy một project Xitrum.
<strong>Việc tạo project được thực hiện với giả định bạn sử dụng Linux và đã cài Java.</strong></p>
<div class="section" id="tao-mot-project-xitrum-moi">
<h2>Tạo một project Xitrum mới<a class="headerlink" href="#tao-mot-project-xitrum-moi" title="Permalink to this headline">¶</a></h2>
<p>Để tạo một project Xitrum mới bạn chỉ cần tải về tập tin
<a class="reference external" href="https://github.com/xitrum-framework/xitrum-new/archive/master.zip">xitrum-new.zip</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>wget -O xitrum-new.zip https://github.com/xitrum-framework/xitrum-new/archive/master.zip
</pre></div>
</div>
<p>Hoặc:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -L -o xitrum-new.zip https://github.com/xitrum-framework/xitrum-new/archive/master.zip
</pre></div>
</div>
</div>
<div class="section" id="chay-project-xitrum">
<h2>Chạy project Xitrum<a class="headerlink" href="#chay-project-xitrum" title="Permalink to this headline">¶</a></h2>
<p>Cách chuẩn nhất để build một project Scala là sử dụng
<a class="reference external" href="https://github.com/harrah/xsbt/wiki/Setup">SBT</a>. Các project mới được tạo đã có sẵn SBT 0.13 trong thư mục
<tt class="docutils literal"><span class="pre">sbt</span></tt>. Nếu bạn muốn tự cài <tt class="docutils literal"><span class="pre">SBT</span></tt>, bạn có thể xem hướng dẫn tại <a class="reference external" href="https://github.com/harrah/xsbt/wiki/Setup">đây</a>.</p>
<p>Sử dụng terminal, chuyển đến thư mục của project mới tạo và chạy lệnh <tt class="docutils literal"><span class="pre">sbt/sbt</span> <span class="pre">run</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>unzip xitrum-new.zip
cd xitrum-new
sbt/sbt run
</pre></div>
</div>
<p>Câu lệnh này sẽ download tất cả <a class="reference internal" href="deps.html"><em>dependencies</em></a>, biên dịch toàn bộ project,
và khởi động web server qua class <tt class="docutils literal"><span class="pre">quickstart.Boot</span></tt>. Trong cửa sổ dòng lệnh Terminal,
bạn sẽ thấy tất cả các định tuyến:</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] Load routes.cache or recollect routes...
[INFO] Normal routes:
GET  /  quickstart.action.SiteIndex
[INFO] SockJS routes:
xitrum/metrics/channel  xitrum.metrics.XitrumMetricsChannel  websocket: true, cookie_needed: false
[INFO] Error routes:
404  quickstart.action.NotFoundError
500  quickstart.action.ServerError
[INFO] Xitrum routes:
GET        /webjars/swagger-ui/2.0.17/index                            xitrum.routing.SwaggerUiVersioned
GET        /xitrum/xitrum.js                                           xitrum.js
GET        /xitrum/metrics/channel                                     xitrum.sockjs.Greeting
GET        /xitrum/metrics/channel/:serverId/:sessionId/eventsource    xitrum.sockjs.EventSourceReceive
GET        /xitrum/metrics/channel/:serverId/:sessionId/htmlfile       xitrum.sockjs.HtmlFileReceive
GET        /xitrum/metrics/channel/:serverId/:sessionId/jsonp          xitrum.sockjs.JsonPPollingReceive
POST       /xitrum/metrics/channel/:serverId/:sessionId/jsonp_send     xitrum.sockjs.JsonPPollingSend
WEBSOCKET  /xitrum/metrics/channel/:serverId/:sessionId/websocket      xitrum.sockjs.WebSocket
POST       /xitrum/metrics/channel/:serverId/:sessionId/xhr            xitrum.sockjs.XhrPollingReceive
POST       /xitrum/metrics/channel/:serverId/:sessionId/xhr_send       xitrum.sockjs.XhrSend
POST       /xitrum/metrics/channel/:serverId/:sessionId/xhr_streaming  xitrum.sockjs.XhrStreamingReceive
GET        /xitrum/metrics/channel/info                                xitrum.sockjs.InfoGET
WEBSOCKET  /xitrum/metrics/channel/websocket                           xitrum.sockjs.RawWebSocket
GET        /xitrum/metrics/viewer                                      xitrum.metrics.XitrumMetricsViewer
GET        /xitrum/metrics/channel/:iframe                             xitrum.sockjs.Iframe
GET        /xitrum/metrics/channel/:serverId/:sessionId/websocket      xitrum.sockjs.WebSocketGET
POST       /xitrum/metrics/channel/:serverId/:sessionId/websocket      xitrum.sockjs.WebSocketPOST
[INFO] HTTP server started on port 8000
[INFO] HTTPS server started on port 4430
[INFO] Xitrum started in development mode
</pre></div>
</div>
<p>Khi khởi động, tất cả các định tuyến (routers) sẽ được kiểm tra và lưu vào log. Bạn đã có luôn danh
sách các định tuyến (routers), điều này rất thuận tiện với bạn để viết tài liệu về RESTful APIs của ứng dụng web
cho bên thứ 3.</p>
<p>Truy cập đến đường dẫn <a class="reference external" href="http://localhost:8000/">http://localhost:8000/</a> hoặc <a class="reference external" href="https://localhost:4430/">https://localhost:4430/</a> bằng trình duyệt web. Trong cửa sổ
dòng lệnh bạn sẽ thấy thông tin của các yêu cầu (request):</p>
<div class="highlight-python"><div class="highlight"><pre>[INFO] GET quickstart.action.SiteIndex, 1 [ms]
</pre></div>
</div>
</div>
<div class="section" id="import-mot-project-xitrum-vao-eclipse">
<h2>Import một project Xitrum vào Eclipse<a class="headerlink" href="#import-mot-project-xitrum-vao-eclipse" title="Permalink to this headline">¶</a></h2>
<p>Bạn có thể <a class="reference external" href="http://scala-ide.org/">sử dụng Eclipse để viết code Scala</a>.</p>
<p>Sử dụng cửa sổ dòng lệnh và từ thư mục của project Xitrum chạy lệnh sau:</p>
<div class="highlight-python"><div class="highlight"><pre>sbt/sbt eclipse
</pre></div>
</div>
<p>file <tt class="docutils literal"><span class="pre">.project</span></tt> cho Eclipse sẽ được tạo với thông tin trong file <tt class="docutils literal"><span class="pre">build.sbt</span></tt>.
Sau đó chạy Eclipse và import project.</p>
</div>
<div class="section" id="import-mot-project-xitrum-vao-intellij">
<h2>Import một project Xitrum vào IntelliJ<a class="headerlink" href="#import-mot-project-xitrum-vao-intellij" title="Permalink to this headline">¶</a></h2>
<p>Bạn cũng có thể sử dụng <a class="reference external" href="http://www.jetbrains.com/idea/">IntelliJ</a> như Eclipse để viết code,
IntelliJ cũng hỗ trợ rất tốt cho Scala.</p>
<p>Để tạo một project chạy trên IDEA, cũng từ thư mục của project Xitrum, sử dụng lệnh:</p>
<div class="highlight-python"><div class="highlight"><pre>sbt/sbt gen-idea
</pre></div>
</div>
</div>
<div class="section" id="autoreload">
<h2>Autoreload<a class="headerlink" href="#autoreload" title="Permalink to this headline">¶</a></h2>
<p>Bạn có thể autoreload các tập tin .class (hot swap) mà không cần phải khởi động lại chương
trình. Tuy nhiên, để tránh gặp phải các vấn đề về hiệu suất cũng như tính ổn định của chương
trình, bạn chỉ nên autoreload các tập tin .class trong quá trình phát triển (development mode).</p>
<div class="section" id="chay-project-voi-ides">
<h3>Chạy project với IDEs<a class="headerlink" href="#chay-project-voi-ides" title="Permalink to this headline">¶</a></h3>
<p>Trong quá trình phát triển, khi bạn chạy project với các IDE như Eclipse hoặc IntelliJ,
mặc định các IDE sẽ tự động tải lại mã nguồn.</p>
</div>
<div class="section" id="chay-project-voi-sbt">
<h3>Chạy project với SBT<a class="headerlink" href="#chay-project-voi-sbt" title="Permalink to this headline">¶</a></h3>
<p>Khi bạn chạy project với SBT, bạn cần phải mở 2 cửa sổ dòng lênh:</p>
<ul class="simple">
<li>Một để chạy <tt class="docutils literal"><span class="pre">sbt/sbt</span> <span class="pre">run</span></tt>. Câu lệnh này để chạy trương trình và tải lại các tập .class khi chúng
được thay đổi.</li>
<li>Một để chạy <tt class="docutils literal"><span class="pre">sbt/sbt</span> <span class="pre">~compile</span></tt>. Câu lệnh này để biên dịch mã nguồn thành các tập .class.</li>
</ul>
<p>Trong thư mục <tt class="docutils literal"><span class="pre">sbt</span></tt>, có một tập tin <a class="reference external" href="https://github.com/xitrum-framework/agent7">agent7.jar</a>.
Tập tin này chịu trách nhiệm tải lại các tập .class trong thư mục và các thư mục con.
Nếu bạn thấy đoạn script <tt class="docutils literal"><span class="pre">sbt/sbt</span></tt>, bạn sẽ thấy tùy chọn như <tt class="docutils literal"><span class="pre">-javaagent:agent7.jar</span></tt>.</p>
</div>
<div class="section" id="dcevm">
<h3>DCEVM<a class="headerlink" href="#dcevm" title="Permalink to this headline">¶</a></h3>
<p>Thông thường JVM chỉ cho phép thay đổi nội dung của một method. Bạn có thể sử dụng
<a class="reference external" href="https://github.com/dcevm/dcevm">DCEVM</a>, một biến thể mã nguồn mở của máy ảo Java HotSpot
VM cho phép bạn thoải mái định nghĩa lại các class đã được tải.</p>
<p>Bạn có thể cài DCEVM bằng 2 cách:</p>
<ul class="simple">
<li>Sử dụng bản <a class="reference external" href="https://github.com/dcevm/dcevm/releases">Patch</a> với bản Java đã được cài đặt sẵn trên máy của bạn.</li>
<li>Cài đặt một bản <a class="reference external" href="http://dcevm.nentjes.com/">prebuilt</a> (cách dễ dàng hơn).</li>
</ul>
<p>Nếu bạn chọn cách sử dụng Patch:</p>
<ul class="simple">
<li>Bạn có thể chạy DCEVM chạy mãi mãi.</li>
<li>Hoặc sử dụng như một JVM khác. Trong trường hợp này, để chạy DCEVM bạn cần chạy câu lệnh <tt class="docutils literal"><span class="pre">java</span></tt> với tùy chọn <tt class="docutils literal"><span class="pre">-XXaltjvm=dcevm</span></tt>.
Ví dụ, bạn cần thêm tùy chọn <tt class="docutils literal"><span class="pre">-XXaltjvm=dcevm</span></tt> vào câu lệnh <tt class="docutils literal"><span class="pre">sbt/sbt</span></tt>.</li>
</ul>
<p>Nếu bạn sử dụng IDE như Eclipse hoặc IntelliJ, bạn cần cài đặt IDE để sử dụng DCEVM (không phải JVM mặc định) để chạy project.</p>
<p>Nếu bạn sử dụng SBT, bạn cần cài đặt biến môi trường <tt class="docutils literal"><span class="pre">PATH</span></tt> với đường dẫn câu lệnh <tt class="docutils literal"><span class="pre">java</span></tt> từ DCEVM (không phải bản JVM mặc định). Bạn vẫn có thể cần đến  <tt class="docutils literal"><span class="pre">javaagent</span></tt> trên đây, bởi vì mặc dù DCEVM hỗ trợ các tiện ích khi sửa đổi các class, nó không thể tự tải lại các class.</p>
<p>Để có thêm thông tin chi tiết bạn có thể tham khảo <a class="reference external" href="http://javainformed.blogspot.jp/2014/01/jrebel-free-alternative.html">DCEVM - A JRebel free alternative</a>.</p>
</div>
</div>
<div class="section" id="danh-sach-cac-tap-tin-bi-bo-qua">
<h2>Danh sách các tập tin bị bỏ qua<a class="headerlink" href="#danh-sach-cac-tap-tin-bi-bo-qua" title="Permalink to this headline">¶</a></h2>
<p>Thông thường, những những tập tin này nên được <a class="reference external" href="https://github.com/xitrum-framework/xitrum-new/blob/master/.gitignore">bỏ qua</a>
(không commited đến các repository SVN or Git):</p>
<div class="highlight-python"><div class="highlight"><pre>.*
log
project/project
project/target
target
tmp
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#tao-mot-project-xitrum-moi">Tạo một project Xitrum mới</a></li>
<li><a class="reference internal" href="#chay-project-xitrum">Chạy project Xitrum</a></li>
<li><a class="reference internal" href="#import-mot-project-xitrum-vao-eclipse">Import một project Xitrum vào Eclipse</a></li>
<li><a class="reference internal" href="#import-mot-project-xitrum-vao-intellij">Import một project Xitrum vào IntelliJ</a></li>
<li><a class="reference internal" href="#autoreload">Autoreload</a><ul>
<li><a class="reference internal" href="#chay-project-voi-ides">Chạy project với IDEs</a></li>
<li><a class="reference internal" href="#chay-project-voi-sbt">Chạy project với SBT</a></li>
<li><a class="reference internal" href="#dcevm">DCEVM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#danh-sach-cac-tap-tin-bi-bo-qua">Danh sách các tập tin bị bỏ qua</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Giới thiệu</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="action_view.html"
                        title="next chapter">Action and view</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="action_view.html" title="Action and view"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Giới thiệu"
             >previous</a> |</li>
        <li><a href="index.html">Xitrum Scala Web Framework Guide 3.22 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Ngoc Dao.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>